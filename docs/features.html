<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Features - IoTD</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <div class="nav-container">
            <div class="logo">
                <pre>
    ___     _____     ____  
   |_ _|___/__   \   |  _ \ 
    | |/ _ \ / /\ /  | | | |
    | | (_) / /  \ \ | |_| |
   |___\___/\/    \_\|____/ 
                </pre>
            </div>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="features.html" class="active">Features</a></li>
                <li><a href="getting-started.html">Getting Started</a></li>
                <li><a href="documentation.html">Documentation</a></li>
                <li><a href="roadmap.html">Roadmap</a></li>
                <li><a href="https://github.com/lileding/iotd">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <div class="content-page">
        <div class="container">
            <h1>Features</h1>
            
            <h2>Core MQTT Features</h2>
            <ul class="feature-list">
                <li>âœ… <strong>MQTT v3.1.1 Protocol Support</strong> - Full implementation of all packet types</li>
                <li>âœ… <strong>QoS=0 (At Most Once)</strong> - Fire-and-forget message delivery</li>
                <li>âœ… <strong>QoS=1 (At Least Once)</strong> - Reliable delivery with acknowledgments</li>
                <li>âœ… <strong>QoS=2 (Exactly Once)</strong> - Guaranteed exactly-once delivery</li>
                <li>âœ… <strong>Wildcard Subscriptions</strong> - Support for + and # wildcards</li>
                <li>âœ… <strong>Retained Messages</strong> - Store and deliver last known good values</li>
                <li>âœ… <strong>Will Messages</strong> - Last Will and Testament support</li>
                <li>âœ… <strong>Keep-Alive</strong> - Automatic client timeout detection</li>
                <li>âœ… <strong>Clean Session</strong> - Session state management</li>
            </ul>

            <h2>Quality of Service Level 1</h2>
            <p>Our QoS=1 implementation ensures reliable message delivery with:</p>
            <ul>
                <li><strong>Message Acknowledgment</strong> - PUBACK flow for delivery confirmation</li>
                <li><strong>Automatic Retransmission</strong> - Configurable retry intervals</li>
                <li><strong>DUP Flag Support</strong> - Proper duplicate handling</li>
                <li><strong>Multiple In-Flight Messages</strong> - No artificial ordering constraints</li>
                <li><strong>Packet ID Management</strong> - Sequential generation with recycling</li>
                <li><strong>QoS Downgrade</strong> - Proper min(publish, subscribe) handling</li>
            </ul>

            <h2>Quality of Service Level 2</h2>
            <p>Our QoS=2 implementation guarantees exactly-once delivery with:</p>
            <ul>
                <li><strong>Four-Step Handshake</strong> - PUBLISH â†’ PUBREC â†’ PUBREL â†’ PUBCOMP</li>
                <li><strong>State Machine</strong> - AwaitingPubRec and AwaitingPubComp states</li>
                <li><strong>Inbound Tracking</strong> - Proper handling of received QoS=2 messages</li>
                <li><strong>Outbound Delivery</strong> - QoS=2 delivery to subscribers</li>
                <li><strong>Retransmission</strong> - Automatic retry for PUBLISH and PUBREL</li>
                <li><strong>State Persistence</strong> - QoS=2 state survives server restarts</li>
                <li><strong>Duplicate Detection</strong> - Proper handling of duplicate messages</li>
            </ul>

            <h2>Security</h2>
            <p>Production-grade security with TLS, authentication, and authorization:</p>
            <ul>
                <li><strong>TLS Encryption</strong> - Secure connections via <code>tls://</code> listener prefix</li>
                <li><strong>Multiple Listeners</strong> - TCP and TLS simultaneously on different ports</li>
                <li><strong>Username/Password Auth</strong> - File-based credential management</li>
                <li><strong>Topic-based ACLs</strong> - Per-user publish/subscribe access rules</li>
                <li><strong>Pluggable Backends</strong> - <code>allowall</code> (default) and <code>file</code> backends for auth and ACL</li>
                <li><strong>Backward Compatible Config</strong> - <code>listen</code> accepts string or array</li>
            </ul>

            <h2>Persistence Layer</h2>
            <p>Data survives server restarts with pluggable storage backends:</p>
            <ul>
                <li><strong>Session Persistence</strong> - Restore sessions for clean_session=false clients</li>
                <li><strong>Subscription Recovery</strong> - Subscriptions survive reconnects</li>
                <li><strong>In-Flight Messages</strong> - QoS=1 and QoS=2 messages restored on reconnect</li>
                <li><strong>QoS=2 State</strong> - Inbound QoS=2 messages persist across restarts</li>
                <li><strong>Retained Messages</strong> - Persist across server restarts</li>
                <li><strong>InMemoryStorage</strong> - Fast storage for development/testing</li>
                <li><strong>SqliteStorage</strong> - Durable storage for production</li>
                <li><strong>Atomic State Save</strong> - All-or-nothing session persistence</li>
            </ul>

            <h2>Architecture & Performance</h2>
            <ul class="feature-list">
                <li>ğŸš€ <strong>Async/Await</strong> - Built on Tokio for high concurrency</li>
                <li>ğŸ›¡ï¸ <strong>Memory Safe</strong> - Written in Rust with zero unsafe code</li>
                <li>âš¡ <strong>Zero-Copy Routing</strong> - Efficient message forwarding</li>
                <li>ğŸ”„ <strong>Event-Driven</strong> - Responsive packet handling</li>
                <li>ğŸ¯ <strong>Lock-Free Operations</strong> - Where possible for performance</li>
                <li>ğŸ“Š <strong>Benchmarked</strong> - Tested with thousands of connections</li>
            </ul>

            <h2>Reliability & Safety</h2>
            <ul class="feature-list">
                <li>âœ… <strong>Race-Condition Free</strong> - CancellationToken architecture</li>
                <li>âœ… <strong>Graceful Shutdown</strong> - Proper cleanup on exit</li>
                <li>âœ… <strong>Session Takeover</strong> - Handle duplicate client IDs</li>
                <li>âœ… <strong>Resource Limits</strong> - Configurable connection limits</li>
                <li>âœ… <strong>Protocol Validation</strong> - Strict MQTT compliance</li>
                <li>âœ… <strong>Error Recovery</strong> - Resilient to client misbehavior</li>
            </ul>

            <h2>Developer Experience</h2>
            <ul class="feature-list">
                <li>ğŸ“ <strong>Configuration Files</strong> - TOML-based configuration</li>
                <li>ğŸ”§ <strong>CLI Arguments</strong> - Easy command-line control</li>
                <li>ğŸ“Š <strong>Structured Logging</strong> - Clear, actionable logs</li>
                <li>ğŸ§ª <strong>Comprehensive Tests</strong> - 100+ unit and integration tests</li>
                <li>ğŸ“š <strong>Documentation</strong> - Architecture and API docs</li>
                <li>ğŸ³ <strong>Docker Support</strong> - Minimal Alpine-based images</li>
            </ul>

            <h2>Performance Metrics</h2>
            <div class="code-block">
                <pre>â€¢ Memory Usage: ~8.45 KB per connection
â€¢ Throughput: 8,600+ messages/second to 950 subscribers
â€¢ Message Rate: 4,000-9,000 msg/sec for small messages
â€¢ Startup Time: < 100ms
â€¢ Binary Size: < 10MB (statically linked)</pre>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2026 IoTD Project. Licensed under MIT.</p>
            <p>Built with â¤ï¸ using Rust</p>
        </div>
    </footer>
</body>
</html>