# IoTD Example Configuration File
#
# This file demonstrates all available configuration options for IoTD.
# Copy this file and modify as needed for your deployment.

# Listen addresses for MQTT connections
# Supports protocol prefixes: tcp:// (default), tls:// (requires [tls] section)
# Can be a single string or an array:
#   listen = "0.0.0.0:1883"
#   listen = ["tcp://0.0.0.0:1883", "tls://0.0.0.0:8883"]
listen = "0.0.0.0:1883"

# Maximum number of retained messages to store
# Default: 10000
retained_message_limit = 10000

# Maximum number of retransmission attempts for QoS=1 messages
# Default: 10
max_retransmission_limit = 10

# Interval between retransmission attempts in milliseconds
# Set to 0 to disable retransmission
# Default: 5000 (5 seconds)
retransmission_interval_ms = 5000

[persistence]
# Storage backend: "memory" or "sqlite"
# Default: "memory"
backend = "memory"

# Path to SQLite database file (only used when backend = "sqlite")
# Default: "iotd.db"
database_path = "iotd.db"

# Session expiry in seconds (0 = never expire)
# Default: 86400 (24 hours)
session_expiry_seconds = 86400

[auth]
# Authentication backend: "allowall" or "passwordfile"
# Default: "allowall"
backend = "allowall"

# Path to password file (only used when backend = "passwordfile")
# Format: one line per user, "username:password"
# Lines starting with '#' are comments
# Default: "passwd"
password_file = "passwd"

[acl]
# ACL (authorization) backend: "allowall" or "aclfile"
# Default: "allowall"
backend = "allowall"

# Path to ACL file (only used when backend = "aclfile")
# Format: one rule per line, "client_id permission topic_filter"
# permission: pub, sub, pubsub
# Lines starting with '#' are comments
# Default: "acl.conf"
acl_file = "acl.conf"

# [tls]
# TLS configuration (required when any listen address uses tls://)
#
# Path to PEM-encoded server certificate (or certificate chain)
# cert_file = "server.crt"
#
# Path to PEM-encoded private key
# key_file = "server.key"
